<?xml version="1.0" ?>
<container
    xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd"
>
    <parameters>
        <parameter key="heptacom_heptaconnect.emission_flow.job_dispatch_batch_size">10</parameter>
        <parameter key="heptacom_heptaconnect.direct_emission_flow.identity_batch_size">10</parameter>
        <parameter key="heptacom_heptaconnect.exploration.job_batch_size">50</parameter>
        <parameter key="heptacom_heptaconnect.exploration.identity_batch_size">50</parameter>
        <parameter key="heptacom_heptaconnect.exploration.direct_emission_batch_size">50</parameter>
    </parameters>
    <services>
        <service
            id="Psr\Http\Message\ResponseFactoryInterface.heptaconnect"
            class="Psr\Http\Message\ResponseFactoryInterface"
        >
            <factory class="Http\Discovery\Psr17FactoryDiscovery" method="findResponseFactory"/>
        </service>
        <service
            id="Psr\Http\Message\StreamFactoryInterface.heptaconnect"
            class="Psr\Http\Message\StreamFactoryInterface"
        >
            <factory class="Http\Discovery\Psr17FactoryDiscovery" method="findStreamFactory"/>
        </service>
        <service
            id="Heptacom\HeptaConnect\Core\Component\Logger\FlowComponentCodeOriginFinderLogger"
            decorates="heptacom_heptaconnect.logger"
        >
            <argument id="Heptacom\HeptaConnect\Core\Component\Logger\FlowComponentCodeOriginFinderLogger.inner" type="service"/>
            <argument id="Heptacom\HeptaConnect\Portal\Base\Emission\Contract\EmitterCodeOriginFinderInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Portal\Base\Exploration\Contract\ExplorerCodeOriginFinderInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Portal\Base\Reception\Contract\ReceiverCodeOriginFinderInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Portal\Base\StatusReporting\Contract\StatusReporterCodeOriginFinderInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Portal\Base\Web\Http\Contract\HttpHandlerCodeOriginFinderInterface" type="service"/>
        </service>
        <service
            class="Heptacom\HeptaConnect\Portal\Base\Profiling\ProfilerContract"
            id="heptacom_heptaconnect.profiler.core"
        >
            <factory service="Heptacom\HeptaConnect\Portal\Base\Profiling\ProfilerFactoryContract" method="factory"/>
            <argument type="string">HeptaConnect\Core::</argument>
        </service>
        <service id="Heptacom\HeptaConnect\Core\Emission\EmitService">
            <argument id="Heptacom\HeptaConnect\Core\Emission\Contract\EmitContextFactoryInterface" type="service"/>
            <argument id="heptacom_heptaconnect.logger" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\StorageKeyGeneratorContract" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Emission\Contract\EmitterStackBuilderFactoryInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Emission\Contract\EmissionFlowEmittersFactoryInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Emission\Contract\EmitterStackProcessorInterface" type="service"/>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\Emission\EmissionFlowEmittersFactory"
            id="Heptacom\HeptaConnect\Core\Emission\Contract\EmissionFlowEmittersFactoryInterface"
        >
            <argument id="Heptacom\HeptaConnect\Core\Job\Transition\Contract\EmittedEntitiesToJobsConverterInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Job\Contract\JobDispatcherContract" type="service"/>
            <argument>%heptacom_heptaconnect.emission_flow.job_dispatch_batch_size%</argument>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\Emission\EmitContextFactory"
            id="Heptacom\HeptaConnect\Core\Emission\Contract\EmitContextFactoryInterface"
        >
            <argument id="Heptacom\HeptaConnect\Core\Configuration\Contract\ConfigurationServiceInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Portal\PortalStackServiceContainerFactory" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\IdentityError\IdentityErrorCreateActionInterface" type="service"/>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\Emission\EmitterStackBuilderFactory"
            id="Heptacom\HeptaConnect\Core\Emission\Contract\EmitterStackBuilderFactoryInterface"
        >
            <argument id="Heptacom\HeptaConnect\Core\Portal\PortalStackServiceContainerFactory" type="service"/>
            <argument id="heptacom_heptaconnect.logger" type="service"/>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\Emission\EmitterStackProcessor"
            id="Heptacom\HeptaConnect\Core\Emission\Contract\EmitterStackProcessorInterface"
        >
            <argument id="heptacom_heptaconnect.logger" type="service"/>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\Emission\EmitterCodeOriginFinder"
            id="Heptacom\HeptaConnect\Portal\Base\Emission\Contract\EmitterCodeOriginFinderInterface"
        />
        <service
            class="Heptacom\HeptaConnect\Core\Exploration\DirectEmissionFlowEmittersFactory"
            id="Heptacom\HeptaConnect\Core\Exploration\Contract\DirectEmissionFlowEmittersFactoryInterface"
        >
            <argument id="Heptacom\HeptaConnect\Core\Emission\Contract\EmissionFlowEmittersFactoryInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Storage\PrimaryKeyToEntityHydrator" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\Identity\IdentityMapActionInterface" type="service"/>
            <argument>%heptacom_heptaconnect.direct_emission_flow.identity_batch_size%</argument>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\Exploration\ExplorationFlowExplorersFactory"
            id="Heptacom\HeptaConnect\Core\Exploration\Contract\ExplorationFlowExplorersFactoryInterface"
        >
            <argument id="Heptacom\HeptaConnect\Core\Exploration\Contract\DirectEmissionFlowEmittersFactoryInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Emission\Contract\EmitterStackBuilderFactoryInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Emission\Contract\EmitterStackProcessorInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Emission\Contract\EmitContextFactoryInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Job\Transition\Contract\ExploredPrimaryKeysToJobsConverterInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Job\Contract\JobDispatcherContract" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Storage\PrimaryKeyToEntityHydrator" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\Identity\IdentityMapActionInterface" type="service"/>
            <argument id="heptacom_heptaconnect.logger" type="service"/>
            <argument>%heptacom_heptaconnect.exploration.job_batch_size%</argument>
            <argument>%heptacom_heptaconnect.exploration.identity_batch_size%</argument>
            <argument>%heptacom_heptaconnect.exploration.direct_emission_batch_size%</argument>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\Exploration\ExploreContextFactory"
            id="Heptacom\HeptaConnect\Core\Exploration\Contract\ExploreContextFactoryInterface"
        >
            <argument id="Heptacom\HeptaConnect\Core\Configuration\Contract\ConfigurationServiceInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Portal\PortalStackServiceContainerFactory" type="service"/>
        </service>
        <service id="Heptacom\HeptaConnect\Core\Exploration\ExploreService">
            <argument id="Heptacom\HeptaConnect\Core\Exploration\Contract\ExploreContextFactoryInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Exploration\Contract\ExplorerStackProcessorInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Exploration\Contract\ExplorationFlowExplorersFactoryInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Exploration\ExplorerStackBuilderFactory" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Portal\PortalStackServiceContainerFactory" type="service"/>
            <argument id="heptacom_heptaconnect.logger" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Job\Contract\JobDispatcherContract" type="service"/>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\Exploration\ExplorerCodeOriginFinder"
            id="Heptacom\HeptaConnect\Portal\Base\Exploration\Contract\ExplorerCodeOriginFinderInterface"
        />
        <service
            class="Heptacom\HeptaConnect\Core\Exploration\ExplorerStackProcessor"
            id="Heptacom\HeptaConnect\Core\Exploration\Contract\ExplorerStackProcessorInterface"
        >
            <argument id="heptacom_heptaconnect.logger" type="service"/>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\Flow\DirectEmissionFlow\DirectEmissionFlow"
            id="Heptacom\HeptaConnect\Portal\Base\Flow\DirectEmission\DirectEmissionFlowContract"
        >
            <argument type="service" id="Heptacom\HeptaConnect\Core\Emission\Contract\EmitterStackBuilderFactoryInterface"/>
            <argument type="service" id="Heptacom\HeptaConnect\Core\Emission\Contract\EmitContextFactoryInterface"/>
            <argument type="service" id="Heptacom\HeptaConnect\Core\Emission\Contract\EmitterStackProcessorInterface"/>
            <argument type="service" id="Heptacom\HeptaConnect\Core\Exploration\Contract\DirectEmissionFlowEmittersFactoryInterface"/>
            <call method="setLogger">
                <argument type="service" id="heptacom_heptaconnect.logger"/>
            </call>
            <call method="setProfiler">
                <argument type="service" id="heptacom_heptaconnect.profiler.core"/>
            </call>
        </service>
        <service id="Heptacom\HeptaConnect\Core\Flow\MessageQueueFlow\MessageHandler">
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\Job\JobGetActionInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Job\Contract\DelegatingJobActorContract" type="service"/>
            <argument id="heptacom_heptaconnect.logger" type="service"/>
            <tag name="messenger.message_handler"/>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\Job\DelegatingJobActor"
            id="Heptacom\HeptaConnect\Core\Job\Contract\DelegatingJobActorContract"
        >
            <argument id="Heptacom\HeptaConnect\Core\Job\Contract\EmissionHandlerInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Job\Contract\ReceptionHandlerInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Job\Contract\ExplorationHandlerInterface" type="service"/>
            <argument id="heptacom_heptaconnect.logger" type="service"/>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\Job\JobDispatcher"
            id="Heptacom\HeptaConnect\Core\Job\Contract\JobDispatcherContract"
        >
            <argument id="messenger.bus.shopware" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\Job\JobCreateActionInterface" type="service"/>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\Job\Handler\EmissionHandler"
            id="Heptacom\HeptaConnect\Core\Job\Contract\EmissionHandlerInterface"
        >
            <argument id="Heptacom\HeptaConnect\Core\Emission\EmitService" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\Job\JobStartActionInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\Job\JobFinishActionInterface" type="service"/>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\Job\Handler\ReceptionHandler"
            id="Heptacom\HeptaConnect\Core\Job\Contract\ReceptionHandlerInterface"
        >
            <argument id="Heptacom\HeptaConnect\Core\Router\Router.lock_factory" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\StorageKeyGeneratorContract" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Reception\ReceiveService" type="service"/>
            <argument id="Heptacom\HeptaConnect\Portal\Base\Support\Contract\DeepObjectIteratorContract" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\Route\RouteGetActionInterface" type="service"/>
            <argument id="heptacom_heptaconnect.logger" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\Job\JobStartActionInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\Job\JobFinishActionInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\Identity\IdentityMapActionInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\Identity\IdentityReflectActionInterface" type="service"/>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\Job\Handler\ExplorationHandler"
            id="Heptacom\HeptaConnect\Core\Job\Contract\ExplorationHandlerInterface"
        >
            <argument id="Heptacom\HeptaConnect\Core\Exploration\ExploreService" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\StorageKeyGeneratorContract" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\Job\JobStartActionInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\Job\JobFinishActionInterface" type="service"/>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\Job\Transition\EmittedEntitiesToReceiveJobsConverter"
            id="Heptacom\HeptaConnect\Core\Job\Transition\Contract\EmittedEntitiesToJobsConverterInterface"
        >
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\Route\ReceptionRouteListActionInterface" type="service"/>
            <argument id="heptacom_heptaconnect.logger" type="service"/>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\Job\Transition\ExploredPrimaryKeysToEmissionJobsConverter"
            id="Heptacom\HeptaConnect\Core\Job\Transition\Contract\ExploredPrimaryKeysToJobsConverterInterface"
        >
            <argument id="heptacom_heptaconnect.logger" type="service"/>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\Mapping\Publisher"
            id="Heptacom\HeptaConnect\Portal\Base\Publication\Contract\PublisherInterface"
        >
            <argument id="Heptacom\HeptaConnect\Core\Job\Contract\JobDispatcherContract" type="service"/>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\Parallelization\ResourceLockStorage"
            id="Heptacom\HeptaConnect\Core\Parallelization\Contract\ResourceLockStorageContract"
        >
            <argument id="Heptacom\HeptaConnect\Core\Parallelization\Contract\ResourceLockStorageContract.lock_factory" type="service"/>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\Portal\File\Filesystem\FilesystemFactory"
            id="Heptacom\HeptaConnect\Core\Portal\File\Filesystem\Contract\FilesystemFactoryInterface"
        >
            <argument id="Heptacom\HeptaConnect\Core\Bridge\File\PortalNodeFilesystemStreamProtocolProviderInterface" type="service"/>
            <argument type="service">
                <service class="Psr\Http\Message\UriFactoryInterface">
                    <factory class="\Http\Discovery\Psr17FactoryDiscovery" method="findUriFactory"/>
                </service>
            </argument>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\StorageKeyGeneratorContract" type="service"/>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\Portal\PortalStackServiceContainerBuilder"
            id="Heptacom\HeptaConnect\Core\Portal\Contract\PortalStackServiceContainerBuilderInterface"
        >
            <argument id="heptacom_heptaconnect.logger" type="service"/>
            <argument id="Heptacom\HeptaConnect\Portal\Base\Serialization\Contract\NormalizationRegistryContract" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Portal\PortalStorageFactory" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Parallelization\ResourceLocking" type="service"/>
            <argument id="Heptacom\HeptaConnect\Portal\Base\Profiling\ProfilerFactoryContract" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\StorageKeyGeneratorContract" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Storage\Filesystem\FilesystemFactory" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Configuration\Contract\ConfigurationServiceInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Portal\Base\Publication\Contract\PublisherInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Web\Http\Contract\HttpHandlerUrlProviderFactoryInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Storage\Contract\RequestStorageContract" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Portal\File\Filesystem\Contract\FilesystemFactoryInterface" type="service"/>

            <call method="setDirectEmissionFlow">
                <argument id="Heptacom\HeptaConnect\Portal\Base\Flow\DirectEmission\DirectEmissionFlowContract" type="service"/>
            </call>
            <call method="setFileReferenceResolver">
                <argument id="Heptacom\HeptaConnect\Portal\Base\File\FileReferenceResolverContract" type="service"/>
            </call>
        </service>
        <service id="Heptacom\HeptaConnect\Core\Portal\PortalStorageFactory">
            <argument id="Heptacom\HeptaConnect\Core\Portal\Storage\PortalNodeStorageItemPacker" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Portal\Storage\PortalNodeStorageItemUnpacker" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\PortalNodeStorage\PortalNodeStorageClearActionInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\PortalNodeStorage\PortalNodeStorageDeleteActionInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\PortalNodeStorage\PortalNodeStorageGetActionInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\PortalNodeStorage\PortalNodeStorageListActionInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\PortalNodeStorage\PortalNodeStorageSetActionInterface" type="service"/>
            <argument id="heptacom_heptaconnect.logger" type="service"/>
        </service>
        <service id="Heptacom\HeptaConnect\Core\Portal\Storage\PortalNodeStorageItemPacker">
            <argument id="Heptacom\HeptaConnect\Portal\Base\Serialization\Contract\NormalizationRegistryContract" type="service"/>
            <argument id="heptacom_heptaconnect.logger" type="service"/>
        </service>
        <service id="Heptacom\HeptaConnect\Core\Portal\Storage\PortalNodeStorageItemUnpacker">
            <argument id="Heptacom\HeptaConnect\Portal\Base\Serialization\Contract\NormalizationRegistryContract" type="service"/>
            <argument id="heptacom_heptaconnect.logger" type="service"/>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\Portal\PackageQueryMatcher"
            id="Heptacom\HeptaConnect\Core\Portal\Contract\PackageQueryMatcherInterface"
        >
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\StorageKeyGeneratorContract" type="service"/>
        </service>
        <service id="Heptacom\HeptaConnect\Core\Storage\Filesystem\FilesystemFactory">
            <argument type="service" id="Heptacom\HeptaConnect\Storage\Base\Contract\StorageKeyGeneratorContract"/>
            <argument type="service">
                <service class="Heptacom\HeptaConnect\Core\Storage\Filesystem\PrefixFilesystem">
                    <argument type="service" id="shopware.filesystem.private"/>
                    <argument>plugins/hepta_connect_bridge_shopware_platform</argument>
                </service>
            </argument>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\Reception\ReceiverCodeOriginFinder"
            id="Heptacom\HeptaConnect\Portal\Base\Reception\Contract\ReceiverCodeOriginFinderInterface"
        />
        <service
            class="Heptacom\HeptaConnect\Core\Reception\ReceiveContextFactory"
            id="Heptacom\HeptaConnect\Core\Reception\Contract\ReceiveContextFactoryInterface"
        >
            <argument id="Heptacom\HeptaConnect\Core\Configuration\Contract\ConfigurationServiceInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Portal\PortalStackServiceContainerFactory" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Support\EntityStatus" type="service"/>
            <argument type="tagged_iterator" tag="heptaconnect.postprocessor" index-by="key" />
        </service>
        <service id="Heptacom\HeptaConnect\Core\Reception\ReceiveService">
            <argument id="Heptacom\HeptaConnect\Core\Reception\Contract\ReceiveContextFactoryInterface" type="service"/>
            <argument id="heptacom_heptaconnect.logger" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\StorageKeyGeneratorContract" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Reception\ReceiverStackBuilderFactory" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Reception\Contract\ReceiverStackProcessorInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Reception\Contract\ReceptionFlowReceiversFactoryInterface" type="service"/>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\Reception\ReceptionFlowReceiversFactory"
            id="Heptacom\HeptaConnect\Core\Reception\Contract\ReceptionFlowReceiversFactoryInterface"
        >
            <argument id="heptacom_heptaconnect.logger" type="service"/>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\Reception\ReceiverStackProcessor"
            id="Heptacom\HeptaConnect\Core\Reception\Contract\ReceiverStackProcessorInterface"
        >
            <argument id="heptacom_heptaconnect.logger" type="service"/>
            <argument id="Heptacom\HeptaConnect\Portal\Base\Support\Contract\DeepObjectIteratorContract" type="service"/>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\StatusReporting\StatusReporterCodeOriginFinder"
            id="Heptacom\HeptaConnect\Portal\Base\StatusReporting\Contract\StatusReporterCodeOriginFinderInterface"
        />
        <service
            class="Heptacom\HeptaConnect\Core\StatusReporting\StatusReportingContextFactory"
            id="Heptacom\HeptaConnect\Core\StatusReporting\Contract\StatusReportingContextFactoryInterface"
        >
            <argument id="Heptacom\HeptaConnect\Core\Configuration\Contract\ConfigurationServiceInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Portal\PortalStackServiceContainerFactory" type="service"/>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\StatusReporting\StatusReportingService"
            id="Heptacom\HeptaConnect\Core\StatusReporting\Contract\StatusReportingServiceInterface"
        >
            <argument id="heptacom_heptaconnect.logger" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\StorageKeyGeneratorContract" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Portal\PortalStackServiceContainerFactory" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\StatusReporting\Contract\StatusReportingContextFactoryInterface" type="service"/>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\File\FileReferenceResolver"
            id="Heptacom\HeptaConnect\Portal\Base\File\FileReferenceResolverContract"
        >
            <argument type="service" id="Heptacom\HeptaConnect\Core\Bridge\File\FileContentsUrlProviderInterface"/>
            <argument type="service" id="Heptacom\HeptaConnect\Core\Bridge\File\FileRequestUrlProviderInterface"/>
            <argument type="service" id="Heptacom\HeptaConnect\Portal\Base\Serialization\Contract\NormalizationRegistryContract"/>
            <argument type="service" id="Heptacom\HeptaConnect\Core\Storage\Contract\RequestStorageContract"/>
            <argument type="service" id="Heptacom\HeptaConnect\Core\Portal\PortalStackServiceContainerFactory"/>
        </service>
        <service id="Heptacom\HeptaConnect\Core\Storage\Contract\RequestStorageContract"
                 class="Heptacom\HeptaConnect\Core\Storage\RequestStorage">
            <argument type="service" id="Heptacom\HeptaConnect\Core\Web\Http\Contract\RequestSerializerInterface"/>
            <argument type="service" id="Heptacom\HeptaConnect\Core\Web\Http\Contract\RequestDeserializerInterface"/>
            <argument type="service" id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\FileReference\FileReferenceGetRequestActionInterface"/>
            <argument type="service" id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\FileReference\FileReferencePersistRequestActionInterface"/>
            <argument type="service" id="Heptacom\HeptaConnect\Storage\Base\Contract\StorageKeyGeneratorContract"/>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\Storage\NormalizationRegistry"
            id="Heptacom\HeptaConnect\Portal\Base\Serialization\Contract\NormalizationRegistryContract"
        >
            <argument tag="heptacom.heptaconnect_normalizer" type="tagged"/>
            <argument tag="heptacom.heptaconnect_denormalizer" type="tagged"/>
        </service>
        <service id="Heptacom\HeptaConnect\Core\Storage\Contract\StreamPathContract"/>
        <service id="Heptacom\HeptaConnect\Core\Storage\Normalizer\StreamDenormalizer">
            <argument id="hepta_connect_bridge_shopware_platform.filesystem.private" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Storage\Contract\StreamPathContract" type="service"/>
            <tag name="heptacom.heptaconnect_denormalizer" priority="200"/>
        </service>
        <service id="Heptacom\HeptaConnect\Core\Storage\Normalizer\StreamNormalizer">
            <argument id="hepta_connect_bridge_shopware_platform.filesystem.private" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Storage\Contract\StreamPathContract" type="service"/>
            <argument id="heptacom_heptaconnect.logger" type="service"/>
            <tag name="heptacom.heptaconnect_normalizer" priority="200"/>
        </service>
        <service id="Heptacom\HeptaConnect\Core\Storage\Normalizer\Psr7RequestDenormalizer">
            <tag name="heptacom.heptaconnect_denormalizer"/>
        </service>
        <service id="Heptacom\HeptaConnect\Core\Storage\Normalizer\Psr7RequestNormalizer">
            <tag name="heptacom.heptaconnect_normalizer"/>
        </service>

        <!-- PostProcessing of Reception -->
        <service id="Heptacom\HeptaConnect\Core\Reception\PostProcessing\MarkAsFailedPostProcessor">
            <tag name="heptaconnect.postprocessor" key="Heptacom\HeptaConnect\Core\Reception\PostProcessing\MarkAsFailedPostProcessor"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\IdentityError\IdentityErrorCreateActionInterface" type="service"/>
        </service>
        <service id="Heptacom\HeptaConnect\Core\Reception\PostProcessing\SaveMappingsPostProcessor">
            <tag name="heptaconnect.postprocessor" key="Heptacom\HeptaConnect\Core\Reception\PostProcessing\SaveMappingsPostProcessor"/>
            <argument id="Heptacom\HeptaConnect\Portal\Base\Support\Contract\DeepObjectIteratorContract" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\Identity\IdentityPersistActionInterface" type="service"/>
            <argument type="service" id="heptacom_heptaconnect.logger"/>
        </service>

        <service
            class="Heptacom\HeptaConnect\Core\Web\Http\HttpHandleContextFactory"
            id="Heptacom\HeptaConnect\Core\Web\Http\Contract\HttpHandleContextFactoryInterface"
        >
            <argument id="Heptacom\HeptaConnect\Core\Configuration\Contract\ConfigurationServiceInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Portal\PortalStackServiceContainerFactory" type="service"/>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\Web\Http\HttpHandleFlowHttpHandlersFactory"
            id="Heptacom\HeptaConnect\Core\Web\Http\Contract\HttpHandleFlowHttpHandlersFactoryInterface"
        />
        <service
            class="Heptacom\HeptaConnect\Core\Web\Http\HttpHandlerCodeOriginFinder"
            id="Heptacom\HeptaConnect\Portal\Base\Web\Http\Contract\HttpHandlerCodeOriginFinderInterface"
        />
        <service
            class="Heptacom\HeptaConnect\Core\Web\Http\HttpHandlerStackBuilderFactory"
            id="Heptacom\HeptaConnect\Core\Web\Http\Contract\HttpHandlerStackBuilderFactoryInterface"
        >
            <argument id="Heptacom\HeptaConnect\Core\Portal\PortalStackServiceContainerFactory" type="service"/>
            <argument id="heptacom_heptaconnect.logger" type="service"/>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\Web\Http\HttpHandleService"
            id="Heptacom\HeptaConnect\Core\Web\Http\Contract\HttpHandleServiceInterface"
        >
            <argument id="Heptacom\HeptaConnect\Core\Web\Http\Contract\HttpHandlerStackProcessorInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Web\Http\Contract\HttpHandleContextFactoryInterface" type="service"/>
            <argument id="heptacom_heptaconnect.logger" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Web\Http\Contract\HttpHandlerStackBuilderFactoryInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\StorageKeyGeneratorContract" type="service"/>
            <argument id="Psr\Http\Message\ResponseFactoryInterface.heptaconnect" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\WebHttpHandlerConfiguration\WebHttpHandlerConfigurationFindActionInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Web\Http\Contract\HttpHandleFlowHttpHandlersFactoryInterface" type="service"/>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\Web\Http\HttpHandlerStackProcessor"
            id="Heptacom\HeptaConnect\Core\Web\Http\Contract\HttpHandlerStackProcessorInterface"
        >
            <argument id="heptacom_heptaconnect.logger" type="service"/>
        </service>
        <service id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Support\RequestContextHelper"/>
        <service id="Heptacom\HeptaConnect\Core\Web\Http\Contract\HttpHandlerUrlProviderFactoryInterface"
                 class="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Web\Http\HttpHandlerUrlProviderFactory">
            <argument type="service" id="Heptacom\HeptaConnect\Storage\Base\Contract\StorageKeyGeneratorContract"/>
            <argument type="service" id="router"/>
            <argument type="service" id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Web\Http\HttpHostProviderContract"/>
            <argument type="service" id="router.request_context"/>
            <argument type="service" id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Support\RequestContextHelper"/>
        </service>

        <service
            id="Heptacom\HeptaConnect\Core\Web\Http\Contract\RequestDeserializerInterface"
            class="Heptacom\HeptaConnect\Core\Web\Http\RequestDeserializer"
        >
            <argument id="Psr\Http\Message\ResponseFactoryInterface.heptaconnect" type="service"/>
            <argument id="Psr\Http\Message\StreamFactoryInterface.heptaconnect" type="service"/>
        </service>
        <service
            id="Heptacom\HeptaConnect\Core\Web\Http\Contract\RequestSerializerInterface"
            class="Heptacom\HeptaConnect\Core\Web\Http\RequestSerializer"
        />

        <service id="Heptacom\HeptaConnect\Core\Configuration\Contract\ConfigurationServiceInterface"
                 class="Heptacom\HeptaConnect\Core\Configuration\ConfigurationService">
            <argument id="Heptacom\HeptaConnect\Core\Portal\PortalRegistry" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\PortalNodeConfiguration\PortalNodeConfigurationGetActionInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\PortalNodeConfiguration\PortalNodeConfigurationSetActionInterface" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Configuration\Contract\PortalNodeConfigurationProcessorServiceInterface" type="service"/>
        </service>

        <service id="Heptacom\HeptaConnect\Core\Configuration\PortalNodeConfigurationInstructionProcessor">
            <tag name="heptaconnect_core.portal_node_configuration.processor"/>
            <argument id="heptacom_heptaconnect.logger" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Portal\PortalRegistry" type="service"/>
            <argument id="Heptacom\HeptaConnect\Core\Portal\Contract\PackageQueryMatcherInterface" type="service"/>
            <argument tag="heptaconnect_core.portal_node_configuration.instruction_file_loader" type="tagged"/>
        </service>

        <service id="Heptacom\HeptaConnect\Core\Configuration\PortalNodeConfigurationCacheProcessor">
            <tag name="heptaconnect_core.portal_node_configuration.processor" priority="10000"/>
            <argument id="cache.system" type="service"/>
            <argument id="Heptacom\HeptaConnect\Storage\Base\Contract\StorageKeyGeneratorContract" type="service"/>
        </service>
        <service
            class="Heptacom\HeptaConnect\Core\Configuration\PortalNodeConfigurationProcessorService"
            id="Heptacom\HeptaConnect\Core\Configuration\Contract\PortalNodeConfigurationProcessorServiceInterface"
        >
            <argument tag="heptaconnect_core.portal_node_configuration.processor" type="tagged"/>
        </service>
    </services>
</container>
