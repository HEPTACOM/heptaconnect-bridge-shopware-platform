imports:
    - { resource: packages/core.yml }

services:
    _defaults:
        autoconfigure: true

    _instanceof:
        Shopware\Core\Framework\DataAbstractionLayer\EntityDefinition:
            tags:
                - { name: shopware.entity.definition }

        Symfony\Component\Console\Command\Command:
            tags:
                - { name: console.command }

    Heptacom\HeptaConnect\Bridge\ShopwarePlatform\:
        resource: '../../*'
        exclude: '../../{Resources,Migration,Bundle.php}'

    Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Command\PortalList:
        arguments:
            - '@Heptacom\HeptaConnect\Core\Portal\PortalRegistry'

    Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Command\DataTypeList:
        arguments:
            - '@Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Storage\Storage'
            - '@Heptacom\HeptaConnect\Core\Portal\PortalRegistry'

    Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Command\Explore:
        arguments:
            - '@Heptacom\HeptaConnect\Core\Explore\ExploreService'

    Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Command\Router\AddRoute:
        arguments:
            - '@Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Storage\Storage'

    Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Command\Router\ListRoutes:
        arguments:
            - '@Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Storage\Storage'
            - '@Heptacom\HeptaConnect\Core\Portal\PortalNodeRegistry'

    Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Command\PortalNode\AddPortalNode:
        arguments:
            - '@Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Storage\Storage'

    Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Command\PortalNode\ListPortalNodes:
        arguments:
            - '@Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Storage\Storage'

    Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Command\PortalNode\RemovePortalNode:
        arguments:
            - '@Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Storage\Storage'

    Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Storage\Storage:
        arguments:
            - '@Shopware\Core\System\SystemConfig\SystemConfigService'
            - '@heptaconnect_dataset_entity_type.repository'
            - '@heptaconnect_mapping_node.repository'
            - '@heptaconnect_mapping.repository'
            - '@heptaconnect_route.repository'
            - '@heptaconnect_error_message.repository'
            - '@heptaconnect_webhook.repository'
            - '@heptaconnect_portal_node.repository'

    Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Webhook\WebhookController:
        arguments:
            - '@Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Storage\Storage'
        tags:
            - { name: controller.service_arguments }
