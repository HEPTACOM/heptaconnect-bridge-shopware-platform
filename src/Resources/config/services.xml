<?xml version="1.0" ?>
<container
    xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd"
>
    <services>
        <prototype resource="../../*" namespace="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\">
            <exclude>../../{Resources,Migration,Bundle.php}</exclude>
            <exclude>../../Messaging/*/*Message.php</exclude>
            <exclude>../../Command/Router/{AddRoute.php,ListRoutes.php,ListRouteCapabilities.php}</exclude>
            <exclude>../../Command/Job/{CleanupFinished.php,CleanupPayloads.php,Run.php}</exclude>
        </prototype>
        <service
            class="Symfony\Component\Lock\LockFactory"
            id="Heptacom\HeptaConnect\Core\Router\Router.lock_factory"
        >
            <argument type="service">
                <service class="Symfony\Component\Lock\Store\PdoStore">
                    <argument id="Doctrine\DBAL\Connection" type="service"/>
                    <argument type="collection">
                        <argument key="db_table">heptaconnect_core_reception_lock</argument>
                    </argument>
                </service>
            </argument>
        </service>
        <service
            class="Symfony\Component\Lock\LockFactory"
            id="Heptacom\HeptaConnect\Core\Parallelization\Contract\ResourceLockStorageContract.lock_factory"
        >
            <argument type="service">
                <service class="Symfony\Component\Lock\Store\PdoStore">
                    <argument id="Doctrine\DBAL\Connection" type="service"/>
                    <argument type="collection">
                        <argument key="db_table">heptaconnect_portal_node_resource_lock</argument>
                    </argument>
                </service>
            </argument>
        </service>
        <service
            id="Heptacom\HeptaConnect\Core\Component\Logger\ExceptionCodeLogger"
            decorates="heptacom_heptaconnect.logger"
        >
            <argument id="Heptacom\HeptaConnect\Core\Component\Logger\ExceptionCodeLogger.inner" type="service"/>
        </service>
        <service id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Command\PortalNode\Extension\ListExtensions">
            <tag name="console.command"/>
            <argument type="service" id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Support\AliasStorageKeyGenerator"/>
            <argument type="service" id="Heptacom\HeptaConnect\Core\Portal\ComposerPortalLoader"/>
            <argument type="service" id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\PortalNode\PortalNodeGetActionInterface"/>
            <argument type="service" id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\PortalExtension\PortalExtensionFindActionInterface"/>
        </service>
        <service id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Command\PortalNode\Extension\ActivateExtension">
            <tag name="console.command"/>
            <argument type="service" id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Support\AliasStorageKeyGenerator"/>
            <argument type="service" id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\PortalExtension\PortalExtensionActivateActionInterface"/>
        </service>
        <service id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Command\PortalNode\Extension\DeactivateExtension">
            <tag name="console.command"/>
            <argument type="service" id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Support\AliasStorageKeyGenerator"/>
            <argument type="service" id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\PortalExtension\PortalExtensionDeactivateActionInterface"/>
        </service>
        <service id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Command\Router\AddRoute">
            <argument type="service" id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Support\AliasStorageKeyGenerator"/>
            <argument type="service" id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\Route\RouteFindActionInterface"/>
            <argument type="service" id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\Route\RouteCreateActionInterface"/>
            <argument type="service" id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\Route\RouteGetActionInterface"/>
            <tag name="console.command"/>
        </service>
        <service id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Command\Router\ListRoutes">
            <argument type="service" id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Support\AliasStorageKeyGenerator"/>
            <argument type="service" id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\Route\RouteOverviewActionInterface"/>
            <tag name="console.command"/>
        </service>
        <service id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Command\Router\RemoveRoute">
            <argument type="service" id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Support\AliasStorageKeyGenerator"/>
            <argument type="service" id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\Route\RouteDeleteActionInterface"/>
            <tag name="console.command"/>
        </service>
        <service id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Command\Router\ListRouteCapabilities">
            <argument type="service" id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\RouteCapability\RouteCapabilityOverviewActionInterface"/>
            <tag name="console.command"/>
        </service>
        <service class="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Profiling\ProfilerFactory"
                 id="Heptacom\HeptaConnect\Portal\Base\Profiling\ProfilerFactoryContract">
            <argument type="service" id="Sourceability\Instrumentation\Profiler\ProfilerInterface"/>
        </service>
        <service id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Command\Job\CleanupFinished">
            <tag name="console.command"/>
            <argument type="service" id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\Job\JobListFinishedActionInterface"/>
            <argument type="service" id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\Job\JobDeleteActionInterface"/>
        </service>
        <service id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Command\Job\Run">
            <tag name="console.command"/>
            <argument type="service" id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\Job\JobGetActionInterface"/>
            <argument type="service" id="Heptacom\HeptaConnect\Core\Job\Contract\DelegatingJobActorContract"/>
            <argument type="service" id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Support\AliasStorageKeyGenerator"/>
        </service>
        <service id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Command\MappingNode\ListMappingNodes">
            <tag name="console.command"/>
            <argument type="service" id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Support\AliasStorageKeyGenerator"/>
            <argument type="service" id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\Identity\IdentityOverviewActionInterface"/>
        </service>
        <service id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Command\MappingNode\ListMappingNodeSiblings">
            <tag name="console.command"/>
            <argument type="service" id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Support\AliasStorageKeyGenerator"/>
            <argument type="service" id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\Identity\IdentityOverviewActionInterface"/>
        </service>
        <service id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Command\MappingNode\MergeMappingNodes">
            <tag name="console.command"/>
            <argument type="service" id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Support\AliasStorageKeyGenerator"/>
            <argument type="service" id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\Identity\IdentityOverviewActionInterface"/>
            <argument type="service" id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\Identity\IdentityPersistActionInterface"/>
        </service>
        <service id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Command\PortalNode\ListFlowComponentsForPortalNode">
            <tag name="console.command"/>
            <argument type="service" id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Support\AliasStorageKeyGenerator"/>
            <argument type="service" id="Heptacom\HeptaConnect\Core\Portal\PortalStackServiceContainerFactory"/>
            <argument type="service" id="Heptacom\HeptaConnect\Portal\Base\Web\Http\Contract\HttpHandlerCodeOriginFinderInterface"/>
            <argument type="service" id="Heptacom\HeptaConnect\Portal\Base\Emission\Contract\EmitterCodeOriginFinderInterface"/>
            <argument type="service" id="Heptacom\HeptaConnect\Portal\Base\Exploration\Contract\ExplorerCodeOriginFinderInterface"/>
            <argument type="service" id="Heptacom\HeptaConnect\Portal\Base\Reception\Contract\ReceiverCodeOriginFinderInterface"/>
            <argument type="service" id="Heptacom\HeptaConnect\Portal\Base\StatusReporting\Contract\StatusReporterCodeOriginFinderInterface"/>
        </service>
        <service id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Command\PortalNode\ListStatusReportTopics">
            <tag name="console.command"/>
            <argument type="service" id="Heptacom\HeptaConnect\Core\Portal\PortalStackServiceContainerFactory"/>
            <argument type="service" id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Support\AliasStorageKeyGenerator"/>
        </service>
        <service id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Command\Config\GetBaseUrlCommand">
            <tag name="console.command"/>
            <argument type="service" id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Web\Http\HttpHostProviderContract"/>
        </service>
        <service id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Command\Config\SetBaseUrlCommand">
            <tag name="console.command"/>
            <argument type="service" id="Shopware\Core\System\SystemConfig\SystemConfigService"/>
        </service>
        <service id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Command\Web\HttpHandler\GetHandlerConfiguration">
            <argument type="service" id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Support\AliasStorageKeyGenerator"/>
            <argument type="service" id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\WebHttpHandlerConfiguration\WebHttpHandlerConfigurationFindActionInterface"/>
            <tag name="console.command"/>
        </service>
        <service id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Command\Web\HttpHandler\ListHandlers">
            <argument type="service" id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Support\AliasStorageKeyGenerator"/>
            <argument type="service" id="Heptacom\HeptaConnect\Core\Portal\PortalStackServiceContainerFactory"/>
            <argument type="service" id="Heptacom\HeptaConnect\Core\Web\Http\Contract\HttpHandlerUrlProviderFactoryInterface"/>
            <argument type="service" id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\PortalNode\PortalNodeListActionInterface"/>
            <tag name="console.command"/>
        </service>
        <service id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Command\Web\HttpHandler\SetHandlerConfiguration">
            <argument type="service" id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Support\AliasStorageKeyGenerator"/>
            <argument type="service" id="Heptacom\HeptaConnect\Storage\Base\Contract\Action\WebHttpHandlerConfiguration\WebHttpHandlerConfigurationSetActionInterface"/>
            <tag name="console.command"/>
        </service>
        <service id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Web\Http\HttpHandlerController" public="true">
            <tag name="controller.service_arguments"/>
            <argument type="service" id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Support\AliasStorageKeyGenerator"/>
            <argument type="service" id="Heptacom\HeptaConnect\Core\Web\Http\Contract\HttpHandleServiceInterface"/>
        </service>
        <service id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Web\Http\HttpHostProviderContract">
            <argument type="service" id="Shopware\Core\System\SystemConfig\SystemConfigService"/>
        </service>
        <service id="Heptacom\HeptaConnect\Core\Bridge\File\FileContentsUrlProviderInterface"
                 class="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\File\FileContentsUrlProvider">
            <argument type="service"
                      id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Support\AliasStorageKeyGenerator"/>
            <argument type="service" id="router.default"/>
            <argument type="service" id="router.request_context"/>
            <argument type="service"
                      id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Web\Http\HttpHostProviderContract"/>
            <argument type="service" id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Support\RequestContextHelper"/>
        </service>
        <service id="Heptacom\HeptaConnect\Core\Bridge\File\FileRequestUrlProviderInterface"
                 class="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\File\FileRequestUrlProvider">
            <argument type="service"
                      id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Support\AliasStorageKeyGenerator"/>
            <argument type="service" id="router.default"/>
            <argument type="service" id="router.request_context"/>
            <argument type="service"
                      id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Web\Http\HttpHostProviderContract"/>
            <argument type="service" id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Support\RequestContextHelper"/>
        </service>
        <service id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\File\FileReferenceController" public="true">
            <argument type="service"
                      id="Heptacom\HeptaConnect\Bridge\ShopwarePlatform\Support\AliasStorageKeyGenerator"/>
            <argument type="service" id="Heptacom\HeptaConnect\Core\Storage\Normalizer\StreamDenormalizer"/>
            <argument type="service" id="Heptacom\HeptaConnect\Core\Storage\RequestStorage"/>
            <argument type="service" id="Heptacom\HeptaConnect\Core\Portal\PortalStackServiceContainerFactory"/>
        </service>
    </services>
</container>
